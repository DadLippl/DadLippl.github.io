<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Obligation Quest</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f9;
      color: #222;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    /* Navigation Bar */
    .top-nav {
      background-color: #001f4d;
      color: white;
      padding: 0.5rem 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .nav-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1000px;
      margin: auto;
    }

    .nav-logo img {
      height: 40px;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 1rem;
      margin: 0;
      padding: 0;
    }

    .nav-links li a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links li a:hover {
      color: #ffcc00;
    }

    .menu-toggle {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: white;
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
        flex-direction: column;
        background-color: #001f4d;
        position: absolute;
        top: 60px;
        right: 0;
        width: 200px;
        padding: 1rem;
        box-shadow: -2px 2px 10px rgba(0,0,0,0.2);
      }

      .nav-links.show {
        display: flex;
      }

      .menu-toggle {
        display: block;
      }
    }

    /* Game Box */
    .game-box {
      max-width: 600px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      position: relative;
    }

    h1 {
      color: #001f4d;
    }

    input {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      margin-top: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      margin: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      background-color: #001f4d;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #003366;
    }

    #feedback {
      margin-top: 1rem;
      font-weight: bold;
    }

    #progress {
      margin-top: 1rem;
    }

    .badge {
      display: inline-block;
      background: #003366;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      margin-top: 1rem;
      font-weight: bold;
    }

    #hint {
      margin-top: 0.5rem;
      font-style: italic;
      color: #555;
    }

    #congratsMessage {
      display: none;
      font-size: 2.5rem;
      font-weight: bold;
      color: #001f4d;
      margin-top: 2rem;
      animation: pop 0.6s ease-out;
    }

    #restartBtn {
      display: none;
      margin-top: 1rem;
    }

    @keyframes pop {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Confetti */
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #ffcc00;
      animation: fall 3s linear infinite;
      opacity: 0.8;
    }

    @keyframes fall {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(600px) rotate(360deg); }
    }
  </style>
</head>
<body>

  <!-- Navigation Bar -->
  <nav class="top-nav" aria-label="Main navigation">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <img src="photos/demolay_crest.svg" alt="DeMolay Crest" />
      </a>
      <div class="menu-toggle" id="mobile-menu">&#9776;</div>
      <ul class="nav-links" id="nav-links">
        <li><a href="https://beademolay.org/" target="_blank" rel="noopener noreferrer">The Road Begins</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="trivia.html">Trivia!</a></li>
        <li><a href="obligationQuest.html">Obligation Quest Game</a></li>
      </ul>
    </div>
  </nav>

  <!-- Game Content -->
  <div class="game-box">
    <h1>üõ°Ô∏è Obligation Quest</h1>
    <p id="linePrompt">Line 1: Memorize and type the Line:</p>
    <input id="userInput" placeholder="Type the line..." />
    <div>
      <button onclick="checkAnswer()">Submit</button>
      <button onclick="playAudio()">üîä Play Line</button>
      <button onclick="showHint()">üí° Show Hint</button>
    </div>
    <p id="hint"></p>
    <p id="feedback"></p>
    <p id="progress">Progress: 0 / <span id="totalLines"></span></p>
    <div id="badgeArea"></div>
    <div id="congratsMessage">üéâ CONGRATULATIONS! üéâ</div>
    <button id="restartBtn" onclick="restartGame()">üîÅ Restart Game</button>
  </div>

  <!-- Scripts -->
  <script>
    const lines = [
      "I promise to uphold the teachings of DeMolay.",
      "I will strive to be loyal to my friends and family.",
      "I will honor my obligations with sincerity and courage.",
      "I will respect the beliefs and rights of others.",
      "I will be faithful to my country and its laws.",
      "I will seek truth and wisdom in all my actions.",
      "I will support my fellow DeMolays in their journey.",
      "I will live a life of service, integrity, and honor."
    ];

    let currentLine = 0;
    let xp = 0;

    document.getElementById("totalLines").textContent = lines.length;

    function checkAnswer() {
      const input = document.getElementById("userInput").value.trim();
      const feedback = document.getElementById("feedback");
      const progress = document.getElementById("progress");

      if (input.toLowerCase() === lines[currentLine].toLowerCase()) {
        feedback.textContent = "‚úÖ Correct!";
        feedback.style.color = "green";
        xp += 10;
        currentLine++;

        if (currentLine < lines.length) {
          document.getElementById("linePrompt").textContent = `Line ${currentLine + 1}: Memorize and type the:`;
          document.getElementById("userInput").value = "";
          document.getElementById("hint").textContent = "";
          progress.textContent = `Progress: ${currentLine} / ${lines.length}`;
          showBadge(xp);
        } else {
          feedback.textContent = "";
          progress.textContent = `Progress: ${lines.length} / ${lines.length}`;
          document.getElementById("congratsMessage").style.display = "block";
          document.getElementById("restartBtn").style.display = "inline-block";
          launchConfetti();
        }
      } else {
        feedback.textContent = "‚ùå Try again!";
        feedback.style.color = "red";
      }
    }

    function playAudio() {
      const line = lines[currentLine];
      const utterance = new SpeechSynthesisUtterance(line);
      utterance.lang = "en-US";
      speechSynthesis.speak(utterance);
    }

    function showHint() {
      const hint = document.getElementById("hint");
      const words = lines[currentLine].split(" ");
      hint.textContent = `Hint: Starts with "${words[0]}" and ends with "${words[words.length - 1]}"`;
    }

    function showBadge(xp) {
      const badgeArea = document.getElementById("badgeArea");
      badgeArea.innerHTML = "";

      if (xp >= 20 && xp < 50) {
        badgeArea.innerHTML = `<div class="badge">üéñÔ∏è Apprentice</div>`;
      } else if (xp >= 50 && xp < 80) {
        badgeArea.innerHTML = `<div class="badge">üèÖ Knight</div>`;
      } else if (xp >= 80) {
        badgeArea.innerHTML = `<div class="badge">üëë Master of Obligation</div>`;
      }
    }

    function launchConfetti() {
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random() * window.innerWidth + "px";
        confetti.style.top = "-10px";
        confetti.style.backgroundColor = getRandomColor();
        confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
        document.body.appendChild(confetti);

        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }

    function getRandomColor() {
      const colors = ["#ffcc00", "#ff6666", "#66ccff", "#99ff99", "#ff99cc"];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function restartGame() {
      currentLine = 0;
      xp = 0;
      document.getElementById("userInput").value = "";
      document.getElementById("linePrompt").textContent = `Line 1: Memorize and type the:`;
      document.getElementById("progress").textContent = `Progress: 0 / ${lines.length}`;
      document.getElementById("feedback").textContent = "";
      document.getElementById("hint").textContent = "";
      document.getElementById("badgeArea").innerHTML = "";
      document.getElementById("congratsMessage").style.display = "none";
      document.getElementById("restartBtn").style.display = "none";
    }

    // Mobile menu toggle
    document.getElementById("mobile-menu").addEventListener("click", () => {
      document.getElementById("nav-links").classList.toggle("show");
    });
  </script>
</body>
</html>
